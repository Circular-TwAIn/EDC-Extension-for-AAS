{
	"info": {
		"_postman_id": "9283a67f-f207-4e01-a561-60bba2345133",
		"name": "EDC Extension",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "20511334"
	},
	"item": [
		{
			"name": "Client",
			"item": [
				{
					"name": "Manage accepted policies",
					"item": [
						{
							"name": "Add accepted policy",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"id\": \"my-custom-policy-definition\",\r\n        \"policy\": {\r\n            \"permissions\": [\r\n                {\r\n                    \"edctype\": \"dataspaceconnector:permission\",\r\n                    \"uid\": null,\r\n                    \"target\": \"-1379397334\",\r\n                    \"action\": {\r\n                        \"type\": \"USE\",\r\n                        \"includedIn\": null,\r\n                        \"constraint\": null\r\n                    },\r\n                    \"assignee\": null,\r\n                    \"assigner\": null,\r\n                    \"constraints\": [],\r\n                    \"duties\": []\r\n                }\r\n            ],\r\n            \"prohibitions\": [],\r\n            \"obligations\": [],\r\n            \"extensibleProperties\": {},\r\n            \"inheritsFrom\": null,\r\n            \"assigner\": null,\r\n            \"assignee\": null,\r\n            \"target\": \"-1379397334\",\r\n            \"@type\": {\r\n                \"@policytype\": \"set\"\r\n            }\r\n        }\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{consumer}}/api/automated/acceptedPolicies",
									"host": [
										"{{consumer}}"
									],
									"path": [
										"api",
										"automated",
										"acceptedPolicies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get accepted policies",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"id\": \"my-custom-policy-definition\",\r\n        \"policy\": {\r\n            \"permissions\": [\r\n                {\r\n                    \"edctype\": \"dataspaceconnector:permission\",\r\n                    \"uid\": null,\r\n                    \"target\": \"-1379397334\",\r\n                    \"action\": {\r\n                        \"type\": \"USE\",\r\n                        \"includedIn\": null,\r\n                        \"constraint\": null\r\n                    },\r\n                    \"assignee\": null,\r\n                    \"assigner\": null,\r\n                    \"constraints\": [],\r\n                    \"duties\": []\r\n                }\r\n            ],\r\n            \"prohibitions\": [],\r\n            \"obligations\": [],\r\n            \"extensibleProperties\": {},\r\n            \"inheritsFrom\": null,\r\n            \"assigner\": null,\r\n            \"assignee\": null,\r\n            \"target\": \"-1379397334\",\r\n            \"@type\": {\r\n                \"@policytype\": \"set\"\r\n            }\r\n        }\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{consumer}}/api/automated/acceptedPolicies",
									"host": [
										"{{consumer}}"
									],
									"path": [
										"api",
										"automated",
										"acceptedPolicies"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove accepted policy",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-api-key",
										"value": "password",
										"type": "default"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\r\n    {\r\n        \"id\": \"my-custom-policy-definition\",\r\n        \"policy\": {\r\n            \"permissions\": [\r\n                {\r\n                    \"edctype\": \"dataspaceconnector:permission\",\r\n                    \"uid\": null,\r\n                    \"target\": \"-1379397334\",\r\n                    \"action\": {\r\n                        \"type\": \"USE\",\r\n                        \"includedIn\": null,\r\n                        \"constraint\": null\r\n                    },\r\n                    \"assignee\": null,\r\n                    \"assigner\": null,\r\n                    \"constraints\": [],\r\n                    \"duties\": []\r\n                }\r\n            ],\r\n            \"prohibitions\": [],\r\n            \"obligations\": [],\r\n            \"extensibleProperties\": {},\r\n            \"inheritsFrom\": null,\r\n            \"assigner\": null,\r\n            \"assignee\": null,\r\n            \"target\": \"-1379397334\",\r\n            \"@type\": {\r\n                \"@policytype\": \"set\"\r\n            }\r\n        }\r\n    }\r\n]",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{consumer}}/api/automated/acceptedPolicies?policyDefinitionId=my-custom-policy-definition",
									"host": [
										"{{consumer}}"
									],
									"path": [
										"api",
										"automated",
										"acceptedPolicies"
									],
									"query": [
										{
											"key": "policyDefinitionId",
											"value": "my-custom-policy-definition"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update accepted policy",
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"id\": \"my-custom-policy-definition\",\r\n    \"policy\": {\r\n        \"permissions\": [\r\n            {\r\n                \"edctype\": \"dataspaceconnector:permission\",\r\n                \"uid\": null,\r\n                \"target\": \"-1379397334\",\r\n                \"action\": {\r\n                    \"type\": \"USE\",\r\n                    \"includedIn\": null,\r\n                    \"constraint\": null\r\n                },\r\n                \"assignee\": null,\r\n                \"assigner\": null,\r\n                \"constraints\": [],\r\n                \"duties\": []\r\n            }\r\n        ],\r\n        \"prohibitions\": [],\r\n        \"obligations\": [],\r\n        \"extensibleProperties\": {},\r\n        \"inheritsFrom\": null,\r\n        \"assigner\": null,\r\n        \"assignee\": null,\r\n        \"target\": \"123456789\",\r\n        \"@type\": {\r\n            \"@policytype\": \"set\"\r\n        }\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{consumer}}/api/automated/acceptedPolicies",
									"host": [
										"{{consumer}}"
									],
									"path": [
										"api",
										"automated",
										"acceptedPolicies"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Automated Negotiation",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type\": \"AasData\",\n    \"properties\": {\n        \"https://w3id.org/edc/v0.0.1/ns/baseUrl\": \"https://localhost:12345/api/v3.0/submodels/aHR0cHM6Ly9leGFtcGxlLmNvbS9pZHMvc20vNTIxM18xMTIwXzgwMjJfOTMwNQ==/submodel-elements/Skills.Skill.Name\",\n        \"method\": \"PATCH\",\n        \"header:x-api-key\": \"password\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{consumer}}/api/automated/negotiate?providerUrl={{provider-dsp}}&providerId=provider&assetId={{asset-id}}",
							"host": [
								"{{consumer}}"
							],
							"path": [
								"api",
								"automated",
								"negotiate"
							],
							"query": [
								{
									"key": "providerUrl",
									"value": "{{provider-dsp}}"
								},
								{
									"key": "providerId",
									"value": "provider"
								},
								{
									"key": "assetId",
									"value": "{{asset-id}}"
								},
								{
									"key": "dataDestinationUrl",
									"value": "http://example.com",
									"description": "May be null",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "1. Get offer for asset",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{consumer}}/api/automated/offer?providerUrl={{provider-dsp}}&assetId={{asset-id}}",
							"host": [
								"{{consumer}}"
							],
							"path": [
								"api",
								"automated",
								"offer"
							],
							"query": [
								{
									"key": "providerUrl",
									"value": "{{provider-dsp}}"
								},
								{
									"key": "assetId",
									"value": "{{asset-id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Initiate negotiation with contractOffer",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"@context\": {\r\n        \"edc\": \"https://w3id.org/edc/v0.0.1/ns/\",\r\n        \"odrl\": \"http://www.w3.org/ns/odrl/2/\"\r\n    },\r\n    \"providerId\": \"provider\",\r\n    \"protocol\": \"dataspace-protocol-http\",\r\n    \"counterPartyId\": \"provider\",\r\n    \"counterPartyAddress\": \"{{provider-dsp}}\",\r\n    \"contractOffer\": {\r\n        \"id\": \"REVGQVVMVF9DT05UUkFDVDMw:MTY5NjE5ODM3Ng==:MGUzY2UxZDMtMjliYi00YzQ3LTlkN2QtODM2YTQ2MmMzNTQ1\",\r\n        \"policy\": {\r\n            \"permissions\": [\r\n                {\r\n                    \"edctype\": \"dataspaceconnector:permission\",\r\n                    \"action\": {\r\n                        \"type\": \"USE\",\r\n                        \"includedIn\": null,\r\n                        \"constraint\": null\r\n                    },\r\n                    \"constraints\": [],\r\n                    \"duties\": []\r\n                }\r\n            ],\r\n            \"prohibitions\": [],\r\n            \"obligations\": [],\r\n            \"extensibleProperties\": {},\r\n            \"inheritsFrom\": null,\r\n            \"assigner\": \"provider\",\r\n            \"assignee\": null,\r\n            \"target\": \"1696198376\",\r\n            \"@type\": {\r\n                \"@policytype\": \"offer\"\r\n            }\r\n        },\r\n        \"assetId\": \"1696198376\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{consumer}}/api/automated/negotiateContract",
							"host": [
								"{{consumer}}"
							],
							"path": [
								"api",
								"automated",
								"negotiateContract"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get data",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{consumer}}/api/automated/transfer?providerUrl={{provider-dsp}}&agreementId={{agreement-id}}&assetId={{asset-id}}",
							"host": [
								"{{consumer}}"
							],
							"path": [
								"api",
								"automated",
								"transfer"
							],
							"query": [
								{
									"key": "providerUrl",
									"value": "{{provider-dsp}}"
								},
								{
									"key": "agreementId",
									"value": "{{agreement-id}}",
									"description": "May not be null"
								},
								{
									"key": "assetId",
									"value": "{{asset-id}}"
								},
								{
									"key": "dataDestinationUrl",
									"value": "http://example.com",
									"description": "May be null",
									"disabled": true
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "apikey",
				"apikey": [
					{
						"key": "value",
						"value": "password",
						"type": "string"
					},
					{
						"key": "key",
						"value": "x-api-key",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "EDC4AAS",
			"item": [
				{
					"name": "Add external AAS service",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password"
							}
						],
						"url": {
							"raw": "{{provider}}/api/client?url=https://localhost:12345",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"client"
							],
							"query": [
								{
									"key": "url",
									"value": "https://localhost:12345",
									"description": "External FA³ST service"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add AAS service by file",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{provider}}/api/environment?environment=path/to/edc-aas-extension/extensions/ids-aas-extension/src/test/AASModels/FestoDemoAAS.json&port=12345",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"environment"
							],
							"query": [
								{
									"key": "environment",
									"value": "path/to/edc-aas-extension/extensions/ids-aas-extension/src/test/AASModels/FestoDemoAAS.json",
									"description": "AAS environent file"
								},
								{
									"key": "port",
									"value": "12345",
									"description": "HTTP port for the FA³ST service to expose"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Remove AAS service",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{provider}}/api/client?url=https://localhost:12345",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"client"
							],
							"query": [
								{
									"key": "url",
									"value": "https://localhost:12345"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Return self description",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{provider}}/api/selfDescription",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"selfDescription"
							]
						}
					},
					"response": []
				},
				{
					"name": "Forward DELETE to AAS service",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\"test\"",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{provider}}/api/aas?requestUrl=https://localhost:12345/api/v3.0/submodels/aHR0cHM6Ly9leGFtcGxlLmNvbS9pZHMvc20vMTE0NV84MDkwXzYwMTJfNTA5Nw",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"aas"
							],
							"query": [
								{
									"key": "requestUrl",
									"value": "https://localhost:12345/api/v3.0/submodels/aHR0cHM6Ly9leGFtcGxlLmNvbS9pZHMvc20vMTE0NV84MDkwXzYwMTJfNTA5Nw"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Forward PUT to AAS service",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"modelType\": {\r\n        \"name\": \"Submodel\"\r\n    },\r\n    \"kind\": \"Instance\",\r\n    \"semanticId\": {\r\n        \"keys\": [\r\n            {\r\n                \"idType\": \"Iri\",\r\n                \"type\": \"GlobalReference\",\r\n                \"value\": \"0173-1#02-AAO677#002\"\r\n            }\r\n        ]\r\n    },\r\n    \"identification\": {\r\n        \"idType\": \"Iri\",\r\n        \"id\": \"https://example.com/ids/sm/4445_8090_6012_7409\"\r\n    },\r\n    \"idShort\": \"Status\",\r\n    \"submodelElements\": []\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{provider}}/api/aas?requestUrl=http://localhost:12345/api/v3.0/submodels/aHR0cHM6Ly9leGFtcGxlLmNvbS9pZHMvc20vNDQ0NV84MDkwXzYwMTJfNzQwOQ",
							"host": [
								"{{provider}}"
							],
							"path": [
								"api",
								"aas"
							],
							"query": [
								{
									"key": "requestUrl",
									"value": "http://localhost:12345/api/v3.0/submodels/aHR0cHM6Ly9leGFtcGxlLmNvbS9pZHMvc20vNDQ0NV84MDkwXzYwMTJfNzQwOQ"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "EDC API",
			"item": [
				{
					"name": "Get contractdefinitions",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{provider-management}}/v2/contractdefinitions/request",
							"host": [
								"{{provider-management}}"
							],
							"path": [
								"v2",
								"contractdefinitions",
								"request"
							],
							"query": [
								{
									"key": "",
									"value": null,
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get policydefinitions",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{provider-management}}/v2/policydefinitions/request",
							"host": [
								"{{provider-management}}"
							],
							"path": [
								"v2",
								"policydefinitions",
								"request"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get assets",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{consumer-management}}/v3/assets/request",
							"host": [
								"{{consumer-management}}"
							],
							"path": [
								"v3",
								"assets",
								"request"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET catalog",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-api-key",
								"value": "password",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"@context\": {\r\n        \"edc\": \"https://w3id.org/edc/v0.0.1/ns/\"\r\n    },\r\n    \"counterPartyAddress\": \"{{provider-dsp}}\",\r\n    \"protocol\": \"dataspace-protocol-http\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{consumer-management}}/v2/catalog/request",
							"host": [
								"{{consumer-management}}"
							],
							"path": [
								"v2",
								"catalog",
								"request"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "asset-id",
			"value": "",
			"type": "default"
		},
		{
			"key": "agreement-id",
			"value": "",
			"type": "default"
		},
		{
			"key": "provider",
			"value": "http://localhost:8281",
			"type": "default"
		},
		{
			"key": "provider-dsp",
			"value": "http://localhost:8282/dsp",
			"type": "default"
		},
		{
			"key": "provider-management",
			"value": "http://localhost:8182/management",
			"type": "default"
		},
		{
			"key": "consumer",
			"value": "http://localhost:9291",
			"type": "default"
		},
		{
			"key": "consumer-dsp",
			"value": "http://localhost:9292/dsp",
			"type": "default"
		},
		{
			"key": "consumer-management",
			"value": "http://localhost:9192/management",
			"type": "default"
		},
		{
			"key": "docker-provider-connector-url",
			"value": "http://provider:8281",
			"type": "default"
		},
		{
			"key": "docker-provider-ids",
			"value": "http://provider:8282/dsp",
			"type": "default"
		},
		{
			"key": "docker-provider-management",
			"value": "http://provider:8182/management",
			"type": "default"
		},
		{
			"key": "docker-consumer",
			"value": "http://consumer:9291",
			"type": "default"
		}
	]
}